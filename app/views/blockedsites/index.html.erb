<p style="color: green"><%= notice %></p>
<body>
<h1 style="font-weight: bold; color: #666666">Add a website</h1>
<%= form_with(model: @blockedsite) do |form| %>
<div style="display: flex; margin-bottom: 20px">
  <td><%= form.text_field :link, style:"resize: none", placeholder:"Add a website URL"%></td>
  <textarea id="website_link" placeholder="Add a website URL" style="resize: none"></textarea>
  <textarea placeholder="Add an Extension ID" style="resize: none"></textarea>
  <button style="font-size: 30px; border: none; color: #c1c1c1; background: transparent; width: 0px; height: 0px; margin-top: -5px;">+</button>
</div>
<h3 style="color: #666666; margin-bottom: 40px">Block Duration</h3>
<div style="display: flex; font-size: 20px; margin-bottom: 90px">
  <div id="hide" class="form-check" style="margin-right: 65px">
    <input  class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
    <label class="form-check-label" for="flexRadioDefault1">
      Permanent
    </label>
  </div>
  <div id="show" class="form-check">
    <input  class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
    <label class="form-check-label" for="flexRadioDefault2">
      Timer
    </label>
  </div>
  <div id="timer-settings" style=" margin-left: 30px;margin-top: -11px">
    <input type="number" id="days" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" min="0" max="99" maxlength="2" class="size" placeholder="0">
    <b style="font-size: 30px; margin-top: -6px">:</b>
    <input type="number" id="hours" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" min="0" max="99" maxlength="2" class="size" placeholder="0">
    <b style="font-size: 30px; margin-top: -6px">:</b>
    <input type="number" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" min="0" max="99" maxlength="2" class="size" placeholder="0">
    <b style="font-size: 30px; margin-top: -6px">:</b>
    <input type="number" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" min="0" max="99" maxlength="2" class="size" style="margin-right: 25px" placeholder="0">
  </div>
  <button style="font-size: 30px; border: none; color: #c1c1c1; background: transparent; width: 0px; height: 0px; margin-top: -8px;" onclick="submit()">+</button>
</div>
<% end %>
<div>
  <hr style="margin-bottom: 35px"/>



  <h2 style="color: #666666">Blockedsites</h2>
<div id="blockedsites">
  <table class="table table-striped table-dark">
    <thead>
    <tr>
      <th scope="col">Link</th>
      <th scope="col">Type</th>
      <th scope="col">Days</th>
      <th scope="col">Hours</th>
      <th scope="col">Minutes</th>
      <th scope="col">Seconds</th>
    </tr>
    </thead>

    <tbody  id="timerTable" >
    <div style="display: none"><%@counter = 0 %></div>
    <% @blockedsites.each do |blockedsite| %>

    <tr>
      <td><%=blockedsite.link %></td>
      <td><%=blockedsite.durationtype %></td>
      <td id="days <%=@counter%>"></td>
      <td id="hours <%=@counter%>"></td>
      <td id="minutes <%=@counter%>"></td>
      <td id="seconds <%=@counter%>"></td>
      <script type="text/javascript">
          decrementDays(<%=@counter%>, "<%=blockedsite.duedate.to_time.to_s%>");
          decrementHours(<%=@counter%>, "<%=blockedsite.duedate.to_time.to_s%>");
          decrementMinutes(<%=@counter%>, "<%=blockedsite.duedate.to_time.to_s%>");
          decrementSeconds(<%=@counter%>, "<%=blockedsite.duedate.to_time.to_s%>");
      </script>
      <td><%= link_to "Show this blockedsite", blockedsite, class: "btn btn-secondary" %></td>
      <td><%= button_to "Remove Timer", blockedsite_path(blockedsite), method: :delete, class: "btn btn-secondary", id: ("delete "+@counter.to_s) %></td>
      <div style="display: none"><%@counter +=1 %></div>
    <% end %>
    </tr>
    <tr>
      <%= form_with(model: @blockedsite) do |form| %>
        <% if @blockedsite.errors.any? %>
          <div style="color: red">
            <h2><%= pluralize(@blockedsite.errors.count, "error") %> prohibited this blockedsite from being saved:</h2>

            <ul>
              <% @blockedsite.errors.each do |error| %>
                <li><%= error.full_message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>
      <td><%= form.text_field :link, class: "dark-fields"%></td>
      <td><%= form.text_field :durationtype, class: "dark-fields" %></td>
      <td><%= form.number_field :days, min:0, max:999, placeholder: "0", class: "dark-fields"%></td>
      <td><%= form.number_field :hours, min:0, max:24 , placeholder: "0", class: "dark-fields"%></td>
      <td><%= form.number_field :minutes, min:0, max:60, placeholder: "0", class: "dark-fields"%></td>
      <td><%= form.number_field :seconds, min:0, max:60, placeholder: "0", class: "dark-fields"%></td>
        <td><%= form.submit :"Add Website" , class: "btn btn-secondary" %></td>
      <% end %>
    </tr>
    </tbody>
  </table>
</div>

  <script type="text/javascript">
      document.querySelector("#hide").addEventListener("click", () => {
          var test = document.getElementById('timer-settings')
          test.style.display = "none";
          console.log("im being clicked")
          <%=@blockedsite.durationtype = "Permanent"%>
      });
      document.querySelector("#show").addEventListener("click", () => {
          var test = document.getElementById('timer-settings')
          test.style.display = '';
          setTimed()
          console.log("im being clicked")
      });

      function setTimed(){
          <%= @blockedsite.durationtype = "Timed" %>
      }
  </script>


<%= link_to "New blockedsite", new_blockedsite_path %>
</div>
</body>